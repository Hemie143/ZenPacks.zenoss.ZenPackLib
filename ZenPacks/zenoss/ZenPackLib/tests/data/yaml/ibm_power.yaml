name: ZenPacks.zenoss.IBM.Power
class_relationships:
##################### STANDARD RELATIONS #####################

# HMC Server
- IBMHMCServer 1:MC HMCLogicalPartition
- IBMHMCServer 1:MC HMCManagedSystem
- IBMHMCServer 1:MC HMCServiceProcessor
# Managed System
- HMCManagedSystem 1:MC HMCHea
- HMCManagedSystem 1:MC HMCHeaPort
- HMCManagedSystem 1:MC HMCLHea
- HMCManagedSystem 1:MC HMCLHeaPort
- HMCManagedSystem 1:MC HMCIODevice
- HMCManagedSystem 1:MC HMCIOPool
- HMCManagedSystem 1:MC HMCProfile
- HMCManagedSystem 1:MC HMCPortGroup
- HMCManagedSystem 1:MC HMCProcessorPool
- HMCManagedSystem 1:M HMCLogicalPartition
# LPAR
- HMCLogicalPartition 1:M HMCIODevice
- HMCLogicalPartition 1:M HMCProfile
- HMCLogicalPartition 1:M HMCLHea
- HMCLogicalPartition 1:M HMCLHeaPort
- HMCLogicalPartition M:M HMCProcessorPool
- HMCLogicalPartition M:M HMCIOPool
# HEA
- HMCHea 1:M HMCHeaPort
- HMCHea 1:M HMCLHeaPort
- HMCHea 1:M HMCLHea
# PORTGROUP
- HMCPortGroup 1:M HMCHeaPort
- HMCPortGroup 1:M HMCLHeaPort
# IO POOL
- HMCIOPool 1:M HMCIODevice

##################### LEGACY RELATIONS #####################

- HMCServer(logicalPartition) 1:MC (hmcServer)LogicalPartitions
- HMCServer(managedSystem) 1:MC (hmcServer)ManagedSystems
- HMCServer 1:MC (hmcServer)ServiceProcessor
- ManagedSystems 1:MC Hea
- ManagedSystems(heaports) 1:MC HeaPort
- ManagedSystems 1:MC LHea
- ManagedSystems(lheaports) 1:MC LHeaPort
- ManagedSystems(ioDevice) 1:MC IODevices
- ManagedSystems(ioPool) 1:MC IOPools
- ManagedSystems 1:MC Profile
- ManagedSystems(portgroups) 1:MC PortGroup
- ManagedSystems(processorPools) 1:MC ProcessorPools
- Hea(heaports) 1:M HeaPort
- Hea(lheaports) 1:M LHeaPort
- Hea(lhea) 1:M LHea
- IOPools(ioDevice) 1:M (ioPool)IODevices
- LogicalPartitions(ioDevice) 1:M IODevices
- LogicalPartitions(ioPool) 1:M IOPools
- LogicalPartitions 1:M Profile
- LogicalPartitions(lhea) M:M (logicalPartitions)LHea
- LogicalPartitions(lheaports) M:M (logicalPartitions)LHeaPort
- ManagedSystems(logicalPartitions) 1:M (managedSystem)LogicalPartitions
- PortGroup(heaports) 1:M (portgroups)HeaPort
- PortGroup(lheaports) 1:M (portgroups)LHeaPort
- ProcessorPools(logicalPartitions) 1:M LogicalPartitions


classes:
##################### STANDARD CLASSES #####################

  DEFAULTS:
    base: [zenpacklib.Component]

  ManagedObject:
    base: [zenpacklib.Component]

  HMCManagedSystemObject:
    base: [zenpacklib.Component]
    properties:
      getManagedSystemStatusText:
        label: Managed System Status
        label_width: 110
        order: 2
        api_only: true
        api_backendtype: method

  IBMHMCServer:
    base: [zenpacklib.Device]
    label: HMC Server
    plural_label: HMC Servers
    auto_expand_column: serialNumber
    order: 1
    properties:
      baseVersion:
        label: Base Version
      bios:
        label: BIOS
      buildLevel:
        label: Build Level
      modelNumber:
        label: Model Number
      release:
        label: Release
      servicePack:
        label: Service Pack
      version:
        label: Version
    dynamicview_group: HMC
    dynamicview_relations:
      impacts: [hmcmanagedSystems, hmclogicalPartitions, hmcserviceProcessors]

  HMCHea:
    base: [HMCManagedSystemObject]
    label: HEA
    content_width: 150
    order: 9
    properties:
      DEFAULTS:
        grid_display: false
      adapter_id:
        label: Adapter ID (adapter_id)
      phys_loc:
        label: Physical Location (phys_loc)
      state:
        label: State (state)
        short_label: State
        grid_display: true
    dynamicview_relations:
      impacts: [hmcheaPorts, hmclheaPorts, hmclheas]
      impacted_by: [hmcmanagedSystem]
    monitoring_templates: [HMCHea]

  HMCHeaPort:
    base: [HMCManagedSystemObject]
    label: HEA Port
    order: 10
    properties:
      DEFAULTS:
        grid_display: false
      adapter_id:
        label: Adapter ID (adapter_id)
      config_conn_speed:
        label: Configured Connection Speed (config_conn_speed)
      config_duplex:
        label: Configured Duplex (config_duplex)
      config_flow_control:
        type: boolean
        label: Configure Flow Control (config_flow_control)
        order: 16
      conn_state:
        label: Connection State (conn_state)
        short_label: State
        grid_display: true
      curr_conn_speed:
        label: Current Connection Speed (curr_conn_speed)
      curr_duplex:
        label: Current Duplex (curr_duplex)
      logical_port_ids:
        label: Logical Port IDs (logical_port_ids)
      max_recv_packet_size:
        label: Max Recieved Packet Size (max_recv_packet_size)
      phys_port_id:
        label: Physical Port ID (phys_port_id)
      phys_port_loc:
        label: Physical Port Location (phys_port_loc)
      phys_port_state:
        label: Physical Port State (phys_port_state)
      phys_port_type:
        label: Physical Port Type (phys_port_type)
      promisc_lpar_id:
        label: Promiscuous LPAR ID (promisc_lpar_id)
      promisc_lpar_name:
        label: Promiscuous LPAR Name (promisc_lpar_name)
      recv_flow_control:
        type: boolean
        label: Recieve Flow Control (recv_flow_control)
        order: 17
      trans_flow_control:
        type: boolean
        label: Transmit Flow Control (trans_flow_control)
        order: 18
    dynamicview_relations:
      impacts: [hmcportGroup]
      impacted_by: [hmchea, hmcmanagedSystem]
    monitoring_templates: [HMCHeaPort]

  HMCIODevice:
    base: [HMCManagedSystemObject]
    label: I/O Device
    order: 7
    properties:
      DEFAULTS:
        grid_display: false
      bus_id:
        label: Bus ID (bus_id)
      pci_device_id:
        label: PCI Device ID (pci_device_id)
      pci_class:
        label: PCI Class (pci_class)
      pci_revision_id:
        label: PCI Revision ID (pci_revision_id)
      drc_name:
        label: Slot (drc_name)
      description:
        label: Description (description)
        label_width: 150
        content_width: 150
        grid_display: true
      pci_subs_device_id:
        label: Adapter Type (pci_subs_device_id)
      pci_subs_vendor_id:
        label: Adapter Driver Vendor ID (pci_subs_vendor_id)
      pci_vendor_id:
        label: Adapter Vendor ID (pci_vendor_id)
    dynamicview_relations:
      impacts: [hmciopool, hmclogicalPartition]
      impacted_by: [hmcmanagedSystem]
    monitoring_templates: [HMCIODevice]

  HMCIOPool:
    base: [HMCManagedSystemObject]
    label: I/O Pools
    plural_label: I/O Pools
    order: 6
    dynamicview_relations:
      impacts: [hmclogicalPartitions]
      impacted_by: [hmciodevices, hmcmanagedSystem]
    monitoring_templates: [HMCIOPool]

  HMCLHea:
    base: [HMCManagedSystemObject]
    label: Logical HEA
    plural_label: Logical HEAs
    order: 11
    properties:
      DEFAULTS:
        grid_display: false
      cq:
        label: Completion Queues (cq)
      drc_index:
        label: Dynamic Reconfiguration Connector Index (drc_index)
      drc_name:
        label: Dynamic Reconfiguration Connector Name (drc_name)
      getCapability:
        label: Capability
        api_only: true
        api_backendtype: method
      getManagedSystemStatusText:
        label: Managed System Status
        grid_display: true
        order: 2
        api_only: true
        api_backendtype: method
      ieq:
        label: Interruptible Event Queues (ieq)
      mr:
        label: Memory Regions (mr)
      nieq:
        label: Non-interruptible Event Queues (nieq)
      qp:
        label: Queue Pairs (qp)
      capability:
        label: Capability
        grid_display: false
    dynamicview_relations:
      impacts: [hmclogicalPartition]
      impacted_by: [hmchea, hmcmanagedSystem]
    monitoring_templates: [HMCLHea]

  HMCLHeaPort:
    base: [HMCManagedSystemObject]
    label: Logical HEA Port
    plural_label: Logical HEA Ports
    order: 12
    properties:
      DEFAULTS:
        grid_display: false
      allowed_os_mac_addrs:
        label: OS-Allowed MAC Address (allowed_os_mac_addrs)
      drc_index:
        label: Dynamic Reconfiguration Connector Index (drc_index)
      drc_name:
        label: Dynamic Reconfiguration Connector Name (drc_name)
      logical_port_id:
        label: Logical Port ID (logical_port_id)
      mac_addr:
        label: MAC Address (mac_addr)
        short_label: MAC Address
      phys_port_id:
        label: Physical Port ID (phys_port_id)
      state:
        label: State (state)
        short_label: State
        label_width: 28
        grid_display: true
      user_def_mac_addr:
        label: User-Defined MAC Address (user_def_mac_addr)
      vlan_id_list:
        label: VLAN IDs (vlan_id_list)
    relationships:
      DEFAULTS:
        grid_display: false
      hmclogicalPartition:
        grid_display: true
      hmcportGroup:
        grid_display: true
      hmcmanagedSystem:
        grid_display: true
        order: 2
    dynamicview_relations:
      impacts: [hmclogicalPartition, hmcportGroup]
      impacted_by: [hmchea, hmcmanagedSystem]
    monitoring_templates: [HMCLHeaPort]

  HMCLogicalPartition:
    base: [HMCManagedSystemObject]
    label: LPAR
    order: 15
    properties:
      DEFAULTS:
        grid_display: false
      allow_perf_collection:
        type: boolean
        label: Performance Data Allowed (allow_perf_collection)
        order: 39
      autoStart:
        label: Automatic Start (auto_start)
      bootMode:
        label: Boot Mode (boot_mode)
      curr_bsr_arrays:
        label: Number of BSR arrays (curr_bsr_arrays)
      curr_lpar_proc_compat_mode:
        label: Current Negotiated Compatibility Mode (curr_lpar_proc_compat_mode)
      curr_max_mem:
        label: Current Maximum Memory (curr_max_mem)
        renderer: Zenoss.render.power_gb
      curr_max_num_huge_pages:
        label: Huge Page Memory Maximum (curr_max_num_huge_pages)
        renderer: Zenoss.render.power_pages
      curr_max_procs:
        label: Maximum Proc Count (curr_max_procs)
      curr_mem:
        label: Current Memory
        label_width: 75
        grid_display: true
        renderer: Zenoss.render.power_gb
        order: 6
      curr_min_mem:
        label: Current Minimum Memory (curr_min_mem)
        label_width: 120
        renderer: Zenoss.render.power_gb
      curr_min_num_huge_pages:
        label: Huge Page Memory Minimum (curr_min_num_huge_pages)
        renderer: Zenoss.render.power_pages
      curr_min_procs:
        label: Minimum Proc Count (curr_min_procs)
      curr_num_huge_pages:
        label: Huge Page Memory Assigned (curr_num_huge_pages)
        renderer: Zenoss.render.power_pages
      curr_proc_mode:
        label: Processor Mode (curr_proc_mode)
      curr_procs:
        label: Assigned Processors (curr_procs)
        short_label: Assigned Processors
        label_width: 100
        grid_display: true
        order: 5
      curr_profile:
        label: Current Profile (curr_profile)
      curr_sharing_mode:
        label: Current Sharing Mode (curr_sharing_mode)
      default_profile:
        label: Default Profile (default_profile)
      desired_lpar_proc_compat_mode:
        label: Requested Compatibility Mode (desired_lpar_proc_compat_mode)
      lparDevice:
        label: Monitored Host
        label_width: 100
        grid_display: true
        renderer: Zenoss.render.default_uid_renderer
        order: 3
        api_only: true
        api_backendtype: method
      lpar_id:
        label: LPAR ID (lpar_id)
      lpar_avail_priority:
        label: Processor Availability Priority (lpar_avail_priority)
      lpar_env:
        label: Operating Environment (lpar_env)
      lpar_keylock:
        label: Keylock Position (lpar_keylock)
      mem_mode:
        label: Memory Mode (mem_mode)
      os_version:
        label: OS Version (os_version)
      power_ctrl_lpar_ids:
        label: Partitions Controlling Power (power_ctrl_lpar_ids)
      processingUnits:
        label: Processing Units (curr_procs)
      redundant_err_path_reporting:
        type: boolean
        label: Redundant Error Path Reporting Enabled (redundant_err_path_reporting)
        order: 40
      resource_config:
        type: boolean
        label: Resources Available (resource_config)
        order: 41
      rmc_ipaddr:
        label: RMC IP Address (rmc_ipaddr)
      rmc_state:
        label: RMC State (rmc_state)
      run_mem:
        label: Running Memory (run_mem)
        renderer: Zenoss.render.power_gb
      run_min_mem:
        label: Running Memory Minimum (run_min_mem)
        renderer: Zenoss.render.power_gb
      run_procs:
        label: Running Processors (run_procs)
      serialNumber:
        label: Serial Number (serial_num)
        index_type: field
        default: Unknown
        index_scope: global
      shared_proc_pool_util_auth:
        type: boolean
        label: Processor Utilization Allowed (shared_proc_pool_util_auth)
        order: 42
      state:
        label: State
        label_width: 70
        grid_display: true
        order: 6
      time_ref:
        type: boolean
        label: Time Reference Partition (time_ref)
        order: 43
      work_group_id:
        label: Enterprise Workload Manager ID (work_group_id)
        details_display: false
    relationships:
      DEFAULTS:
        grid_display: false
      hmciodevices: {}
      hmciopools: {}
      hmclheas: {}
      hmclheaPorts: {}
      hmcmanagedSystem:
        grid_display: true
        order: 2
      hmcprocessorPools: {}
      hmcprofiles: {}
    dynamicview_group: Logical Partitions
    dynamicview_relations:
      impacts: [lparDevice]
      impacted_by: [hmclheas, hmclheaPorts, hmciopools, hmciodevices, hmcprocessorPools, hmcmanagedSystem]
    monitoring_templates: [HMCLogicalPartition]

  HMCManagedSystem:
    label: Managed System
    content_width: 150
    order: 2
    properties:
      DEFAULTS:
        grid_display: false
      active_lpar_mobility_capable:
        type: boolean
        label: Active LPAR Mobility Support (active_lpar_mobility_capable)
        order: 55
      active_lpar_share_idle_procs_capable:
        type: boolean
        label: Active LPAR Share Idle Procs Support (active_lpar_share_idle_procs_capable)
        order: 56
      active_mem_expansion_capable:
        type: boolean
        label: Active Memory Expansion Support (active_mem_expansion_capable)
        order: 57
      active_mem_sharing_capable:
        type: boolean
        label: Active Memory Sharing Support (active_mem_sharing_capable)
        order: 58
      addr_broadcast_perf_policy_capable:
        type: boolean
        label: Address Broadcast Perf Policy Support (addr_broadcast_perf_policy_capable)
        order: 59
      assign_5250_cpw_percent:
        label: Assign 5250 CPW Percent (assign_5250_cpw_percent)
      availableProcessor:
        label: Available Processors
        label_width: 110
        grid_display: true
        order: 3
      bsr_capable:
        type: boolean
        label: BSR Support (bsr_capable)
        order: 60
      cod_mem_capable:
        type: boolean
        label: Memory Capacity on Demand Support (cod_mem_capable)
        order: 61
      cod_proc_capable:
        type: boolean
        label: Processor Capacity on Demand Support (cod_proc_capable)
        order: 62
      configurableCpu:
        label: Configurable Processors
        label_width: 120
        grid_display: true
        order: 2
      configurableMemory:
        label: Configurable Memory
        label_width: 110
        grid_display: true
        renderer: Zenoss.render.power_gb
        order: 4
      cpuassignedToPartitions:
        label: Num Assigned CPUs
      curr_max_lpars_per_hca:
        label: Current Side Max LPARs per HCA (curr_max_lpars_per_hca)
      curr_mfg_default_boot_mode:
        label: Current Side Boot Mode (curr_mfg_default_boot_mode)
      curr_mfg_default_ipl_source:
        label: Current Side IPL Source (curr_mfg_default_ipl_source)
      curr_power_on_side:
        label: Current Side Service Processor (curr_power_on_side)
      curr_power_on_speed:
        label: Current Side Service Processor Speed (curr_power_on_speed)
      curr_sys_keylock:
        label: Current Side Keylock (curr_sys_keylock)
      detailed_state:
        label: State Detail (detailed_state)
      electronic_err_reporting_capable:
        type: boolean
        label: Electronic Error Reporting Support (electronic_err_reporting_capable)
        order: 63
      firmware_power_saver_capable:
        type: boolean
        label: Firmware Power Saver Support (firmware_power_saver_capable)
        order: 64
      frame_5250_application_capable:
        type: boolean
        label: Frame 5250 Application Support (frame_5250_application_capable)
        order: 65
      getStatusText:
        label: Status
        grid_display: true
        order: 1
        api_only: true
        api_backendtype: method
      hardware_discovery_capable:
        type: boolean
        label: Hardware Discovery Support (hardware_discovery_capable)
        order: 66
      hardware_power_saver_capable:
        type: boolean
        label: Hardware Power Saver Support (hardware_power_saver_capable)
        order: 67
      hca_bandwidth_capabilities:
        label: HCA Bandwidth Capabilities (hca_bandwidth_capabilities)
      hca_capable:
        type: boolean
        label: HCA (hca_capable)
        order: 68
      huge_page_mem_capable:
        type: boolean
        label: Huge Page Memory (huge_page_mem_capable)
        order: 69
      inactive_lpar_mobility_capable:
        type: boolean
        label: Inactive LPAR Mobility Support (inactive_lpar_mobility_capable)
        order: 70
      installedMemory:
        label: Installed Memory
        renderer: Zenoss.render.power_gb
      installedProcessor:
        label: Installed Processors
      ipaddr:
        label: IP Address (ipaddr)
      lhea_capable:
        type: boolean
        label: LHEA Support(lhea_capable)
        order: 71
      lpar_avail_priority_capable:
        type: boolean
        label: Priority LPAR Available Support (lpar_avail_priority_capable)
        order: 72
      lpar_proc_compat_mode_capable:
        type: boolean
        label: LPAR Processor Compatibility Mode Support (lpar_proc_compat_mode_capable)
        order: 73
      lpar_proc_compat_modes:
        label: LPAR Processor Compatibility Modes (lpar_proc_compat_modes)
      lpar_remote_restart_capable:
        type: boolean
        label: LPAR Remote Restart Support (lpar_remote_restart_capable)
        order: 74
      lpar_suspend_capable:
        type: boolean
        label: LPAR Suspend Support (lpar_suspend_capable)
        order: 75
      manufactureDefConfig:
        type: boolean
        label: Manufacturer Default Configuration (mfg_default_config)
        order: 76
      max_lpars:
        label: Max Number of LPARs (max_lpars)
      max_power_ctrl_lpars:
        label: Max Power Controlling Partitions per Partition (max_power_ctrl_lpars)
      max_remote_restart_capable_lpars:
        label: Max Remote Restart Capable LPARs (max_remote_restart_capable_lpars)
      max_suspend_capable_lpars:
        label: Max Suspend Capable LPARs (max_suspend_capable_lpars)
      max_vtpm_lpars:
        label: Max VTPM LPARS (max_vtpm_lpars)
      memassignedToPartitions:
        label: Mem Assigned To Partitions
        renderer: Zenoss.render.power_gb
      memavailable:
        label: Available Memory
        label_width: 100
        grid_display: true
        renderer: Zenoss.render.power_gb
        order: 5
      memoryRegionSize:
        label: Memory Region Size (mem_region_size)
        renderer: Zenoss.render.power_gb
      micro_lpar_capable:
        type: boolean
        label: Micro LPAR Suport (micro_lpar_capable)
        order: 77
      type_model:
        label: Model (type_model)
      os400_capable:
        type: boolean
        label: OS400 Support (os400_capable)
        order: 78
      pend_max_lpars_per_hca:
        label: Temporary Side Max LPARs per HCA (pend_max_lpars_per_hca)
      pend_mfg_default_boot_mode:
        label: Temporary Side Boot Mode (pend_mfg_default_boot_mode)
      pend_mfg_default_ipl_source:
        label: Temporary Side IPL Source (pend_mfg_default_ipl_source)
      pend_power_on_lpar_start_policy:
        label: Temporary Side LPAR Start Policy (pend_power_on_lpar_start_policy)
      pend_power_on_option:
        label: Temporary Side Option (pend_power_on_option)
      pend_power_on_side:
        label: Temporary Side Service Processor (pend_power_on_side)
      pend_power_on_speed:
        label: Temporary Side Service Processor Speed (pend_power_on_speed)
      pend_sys_keylock:
        label: Temporary Side Keylock (pend_sys_keylock)
      power_off_policy:
        label: Power Off Policy (power_off_policy)
      power_on_attr:
        label: Power On Attribute (power_on_attr)
      power_on_lpar_start_policy:
        label: Power On LPAR Start Policy (power_on_lpar_start_policy)
      power_on_method:
        label: Power On Method (power_on_method)
      power_on_option:
        label: Power On Option (power_on_option)
      power_on_type:
        label: Power On Type (power_on_type)
      redundant_err_path_reporting_capable:
        type: boolean
        label: Redundant Error Path Reporting Support (redundant_err_path_reporting_capable)
        order: 79
      reservedMemory:
        label: Reserved (sys_firmware_mem)
        renderer: Zenoss.render.power_gb
      serialNumber:
        label: Serial Number
        grid_display: true
        order: 6
      service_lpar_name:
        label: Service Partition (service_lpar_name)
      sp_version:
        label: Service Processor Version (sp_version)
      service_lpar_id:
        label: LPAR with Platform Service Authority (service_lpar_id)
      shared_eth_failover_capable:
        type: boolean
        label: Shared Ethernet Failover Support (shared_eth_failover_capable)
        order: 80
      sni_msg_passing_capable:
        type: boolean
        label: SNI Message Passing Support (sni_msg_passing_capable)
        order: 81
      sp_boot_attr:
        label: Shared Processor Boot Attribute (sp_boot_attr)
      sp_boot_major_type:
        label: Shared Processor Boot Major Type (sp_boot_major_type)
      sp_boot_minor_type:
        label: Shared Processor Boot Minor Type (sp_boot_minor_type)
      sp_failover_capable:
        type: boolean
        label: Shared Processor Failover Support (sp_failover_capable)
        order: 82
      sp_version:
        label: Shared Processor Version (sp_version)
      state:
        label: State
      vet_activation_capable:
        type: boolean
        label: VET Activation Support (vet_activation_capable)
        order: 83
      virtual_fc_capable:
        type: boolean
        label: Virtual FC Support (virtual_fc_capable)
        order: 84
      virtual_io_server_capable:
        type: boolean
        label: Virtual IO Server Support (virtual_io_server_capable)
        order: 85
      virtual_switch_capable:
        type: boolean
        label: Virtual Switch Support (virtual_switch_capable)
        order: 86
      vtpm_version:
        label: VTPM Version (vtpm_version)
    relationships:
      DEFAULTS:
        grid_display: false
      hmcheaPorts: {}
      hmcheas: {}
      hmciodevices: {}
      hmciopools: {}
      hmclheaPorts: {}
      hmclheas: {}
      hmclogicalPartitions: {}
      hmcportGroups: {}
      hmcprocessorPools: {}
      hmcprofiles: {}
    dynamicview_group: Managed Systems
    dynamicview_relations:
      impacts: [hmciodevices, hmciopools, hmcheas, hmcheaPorts, hmclheas, hmclheaPorts, hmcportGroups, hmcprocessorPools, hmclogicalPartitions]
      impacted_by: [ibmhmcserver]
    monitoring_templates: [HMCManagedSystem]

  HMCPortGroup:
    base: [HMCManagedSystemObject]
    label: Port Group
    content_width: 120
    order: 8
    properties:
      DEFAULTS:
        grid_display: false
      adapter_id:
        label: Adapter ID (adapter_id)
      curr_port_group_mcs_value:
        label: Current Side MCS (curr_port_group_mcs_value)
      pend_port_group_mcs_value:
        label: Temporary Side MCS (pend_port_group_mcs_value)
      phys_port_ids:
        label: Physical Port IDs (phys_port_ids)
      unassigned_logical_port_ids:
        label: Unassigned Logical Port IDs (unassigned_logical_port_ids)
      valid_port_group_mcs_values:
        label: Valid MCS Values (valid_port_group_mcs_values)
    dynamicview_relations:
      impacts: [hmclheaPorts]
      impacted_by: [hmcheaPorts]
    monitoring_templates: [HMCPortGroup]

  HMCProcessorPool:
    base: [HMCManagedSystemObject]
    label: Processor Pool
    order: 5
    properties:
      poolname:
        label: Pool Name (poolname)
        short_label: Pool
        default: N/A
      shared_proc_pool_id:
        label: Shared Processor Pool ID (shared_proc_pool_id)
        short_label: Shared Proc ID
        default: N/A
    monitoring_templates: [HMCProcessorPool]
    dynamicview_relations:
      impacts: [hmclogicalPartitions]
      impacted_by: [hmcmanagedSystem]

  HMCProfile:
    base: [HMCManagedSystemObject]
    label: LPAR Profile
    order: 4
    properties:
      DEFAULTS:
        grid_display: false
      affinity_group_id:
        label: Affinity Group ID (affinity_group_id)
        order: 2
      all_resources:
        type: boolean
        label: Use All Managed Resources (all_resources)
        order: 43
      auto_start:
        type: boolean
        label: Auto Start (auto_start)
        order: 44
      boot_mode:
        label: Boot Mode (boot_mode)
        order: 3
      bsr_arrays:
        label: BSR Arrays (bsr_arrays)
        order: 4
      conn_monitoring:
        type: boolean
        label: Connection Monitoring (conn_monitoring)
        order: 45
      desired_mem:
        label: Requested Memory (desired_mem)
        order: 5
      desired_num_huge_pages:
        label: Requested Huge Pages (desired_num_huge_pages)
        order: 6
      desired_proc_units:
        label: Assigned Processing Units (desired_proc_units)
        order: 7
      desired_procs:
        label: Assigned Processors (desired_procs)
        order: 8
      electronic_err_reporting:
        type: boolean
        label: Electronic Error Reporting Enabled (electronic_err_reporting)
        order: 46
      hca_adapters:
        label: Host Channel Adapters (hca_adapters)
        order: 9
      hpt_ratio:
        label: Ratio HW Page Size to Max Partition Mem (hpt_ratio)
        order: 10
      io_slots:
        label: I/O Slots (io_slots)
        order: 11
      lhea_capabilities:
        label: LHEA Capabilities (lhea_capabilities)
        order: 12
      lhea_logical_ports:
        label: LHEA Ports (lhea_logical_ports)
        order: 13
      lpar_env:
        label: LPAR Environment (lpar_env)
        short_label: Environment
        order: 14
      lpar_id:
        label: LPAR ID (lpar_id)
        order: 15
      lpar_io_pool_ids:
        label: IO Pool IDs (lpar_io_pool_ids)
        order: 16
      lpar_name:
        label: LPAR Name (lpar_name)
        order: 17
      lpar_proc_compat_mode:
        label: Processor Compatibility Mode (lpar_proc_compat_mode)
        order: 18
      max_mem:
        label: Maximum Memory (max_mem)
        short_label: Max Memory
        grid_display: true
        renderer: Zenoss.render.power_gb
        order: 22
      max_num_huge_pages:
        label: Maximum Huge Pages (max_num_huge_pages)
        order: 20
      max_proc_units:
        label: Maximum Processing Units (max_proc_units)
        order: 21
      max_procs:
        label: Maximum Processors (max_procs)
        short_label: Max CPUs
        grid_display: true
        order: 19
      max_virtual_slots:
        label: Maximum Virtual Slots (max_virtual_slots)
        short_label: Max Slots
        order: 23
      mem_expansion:
        label: Maximum Expansion (mem_expansion)
        order: 24
      mem_mode:
        label: Memory Mode (mem_mode)
        order: 25
      min_mem:
        label: Minimum Memory (min_mem)
        renderer: Zenoss.render.power_gb
        order: 26
      min_num_huge_pages:
        label: Minimum Huge Pages (min_num_huge_pages)
        order: 27
      min_proc_units:
        label: Minimum Processing Units (min_proc_units)
        order: 28
      min_procs:
        label: Minimum Processors (min_procs)
        order: 29
      power_ctrl_lpar_ids:
        label: Partitions Controlling Power (power_ctrl_lpar_ids)
        order: 30
      proc_mode:
        label: Processor Mode (proc_mode)
        short_label: Processor Mode
        order: 2
      redundant_err_path_reporting:
        type: boolean
        label: Redundant Error Path Reporting Enabled (redundant_err_path_reporting)
        order: 47
      shared_proc_pool_id:
        label: Shared Processor Pool ID (shared_proc_pool_id)
        order: 31
      shared_proc_pool_name:
        label: Shared Processor Pool Name (shared_proc_pool_name)
        order: 32
      sharing_mode:
        label: Sharing Mode (sharing_mode)
        order: 33
      title:
        label: Title (title)
        order: 34
      virtual_eth_adapters:
        label: Virtual Ethernet Adapters (virtual_eth_adapters)
        order: 35
      virtual_fc_adapters:
        label: Virtual FC Adapters (virtual_fc_adapters)
        order: 36
      virtual_scsi_adapters:
        label: Virtual SCSI Adapters (virtual_scsi_adapters)
        order: 37
      virtual_serial_adapters:
        label: Virtual Serial Adapters (virtual_serial_adapters)
        order: 38
      vtpm_adapters:
        label: VTPM Adapters (vtpm_adapters)
        order: 39
      work_group_id:
        label: Enterprise Workload Manager ID (work_group_id)
        order: 40
    monitoring_templates: [HMCProfile]

  HMCServiceProcessor:
    label: Service Processor
    order: 1
    properties:
      DEFAULTS: {}
      ipaddr:
        label: IP Address (ipaddr)
        short_label: IP Address
      alt_ipaddr:
        label: Alternate IP Address (alt_ipaddr)
        short_label: Alternate IP
      state:
        label: Connection State (state)
        short_label: State
      sp_phys_loc:
        label: Location Code (sp_phys_loc)
        short_label: Location Code
      sp:
        label: Service Processor Role (sp)
        short_label: Role
      type_model_serial_num:
        label: Serial Number (type_model_serial_num)
        short_label: Serial Number
    monitoring_templates: [HMCServiceProcessor]

##################### LEGACY CLASSES #####################

  HMCServer:
    base: [zenpacklib.Device]
    label: HMC Server

  ManagedSystemObject:
    base: [ManagedObject]
    properties:
      getManagedSystemStatusText:
        label: Managed System Status
        label_width: 110
        order: 2
        api_only: true
        api_backendtype: method

  Hea:
    base: [ManagedSystemObject]
    label: HEA

  HeaPort:
    base: [ManagedSystemObject]
    label: HEA Port

  IODevices:
    base: [ManagedSystemObject]
    label: I/O Device

  IOPools:
    base: [ManagedSystemObject]
    label: I/O Pools

  LHea:
    base: [ManagedSystemObject]
    label: Logical HEA

  LHeaPort:
    base: [ManagedSystemObject]
    label: Logical HEA Port

  LogicalPartitions:
    base: [ManagedSystemObject]
    label: LPAR
    relationships:
      DEFAULTS:
        grid_display: false
      ioDevice: {}
      ioPool: {}
      lhea: {}
      lheaports: {}
      managedSystem:
        grid_display: true
        order: 2
      processorPools: {}
      profiles: {}

  ManagedSystems:
    label: Managed System
    relationships:
      DEFAULTS:
        grid_display: false
      heaports: {}
      heas: {}
      ioDevice: {}
      ioPool: {}
      lheaports: {}
      lheas: {}
      logicalPartitions: {}
      portgroups: {}
      processorPools: {}
      profiles: {}

  PortGroup:
    base: [ManagedSystemObject]
    label: Port Group

  ProcessorPools:
    base: [ManagedSystemObject]
    label: Processor Pool

  Profile:
    base: [ManagedSystemObject]
    label: LPAR Profile

  ServiceProcessor:
    label: Service Processor


device_classes:
  /Server/IBM/Power/HMC:
    zProperties:
      zDeviceTemplates: 
        - Device
      zPythonClass: ZenPacks.zenoss.IBM.Power.IBMHMCServer
      zSnmpMonitorIgnore: True
      zCredentialsZProperties:
        - zCommandUsername
        - zCommandPassword
      zCommandUsername: hscroot
      zLinks: <a href="http://www-304.ibm.com/webapp/set2/sas/f/hmc/resources.html" target="_blank">HMC Information Center</a>
      zCollectorPlugins:
        - ibm.ssh.HMCModelerPlugin
    templates:
      Device:
        description: ''
        targetPythonClass: Products.ZenModel.Device
        datasources:
          remodel:
            type: PowerIncrement
            cycletime: 300
      EthernetAdapter:
        description: ''
        targetPythonClass: Products.ZenModel.Device
        datasources:
          ms_interface:
            type: Power
            component: ${here/id}
            commandTemplate: lshwres -r hea --rsubtype phys --level port --stat -m
              "${here/getManagedSystemID}"
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              recived_packets: DERIVE_MIN_0_ALIAS
              recv_mac_error: DERIVE_MIN_0_ALIAS
              recv_octets: DERIVE_MIN_0_ALIAS
              trans_MAC_error: DERIVE_MIN_0_ALIAS
              trans_octets: DERIVE_MIN_0_ALIAS
              trans_packets: DERIVE_MIN_0_ALIAS
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
        graphs:
          Errors:
            units: errors/sec
            miny: 0
            graphpoints:
              interface_recv_mac_error:
                dpName: ms_interface_recv_mac_error
                lineType: AREA
                legend: Receive
              interface_trans_MAC_error:
                dpName: ms_interface_trans_MAC_error
                legend: Send
          Packets:
            units: packets/sec
            miny: 0
            graphpoints:
              interface_recived_packets:
                dpName: ms_interface_recived_packets
                lineType: AREA
                legend: Inbound
              interface_trans_packets:
                dpName: ms_interface_trans_packets
                legend: Outbound
          Throughput:
            units: bits/sec
            miny: 0
            graphpoints:
              interface_recv_octets:
                dpName: ms_interface_recv_octets
                lineType: AREA
                legend: Inbound
                rpn: 8,*
              interface_trans_octets:
                dpName: ms_interface_trans_octets
                legend: Outbound
                rpn: 8,*
      HMCHea:
        description: Hea Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCHea
      HMCHeaPort:
        description: HeaPort Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCHeaPort
        datasources:
          lshwres:
            type: Power
            component: ${here/id}
            commandTemplate: lshwres -r hea --rsubtype phys --level port --stat -m
              "${here/getManagedSystemID}" --filter "adapter_ids=${here/adapter_id}"
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              received_packets: DERIVE_MIN_0_ALIAS
              transmitted_packets: DERIVE_MIN_0_ALIAS
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
        graphs:
          Packets:
            units: packets/sec
            graphpoints:
              received_packets:
                dpName: lshwres_received_packets
                legend: Receive
              transmitted_packets:
                dpName: lshwres_transmitted_packets
                legend: Send
      HMCLHea:
        description: Logical Hea Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCLHea
      HMCLHeaPort:
        description: Logical Hea Port Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCLHeaPort
      HMCLogicalPartition:
        description: Logical Partition Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCLogicalPartition
        datasources:
          lpar_cpu:
            type: Power
            component: ${here/id}
            commandTemplate: lslparutil -r lpar -m "${here/getManagedSystemID}" --filter
              "lpar_ids=${here/lpar_id}" -n 2
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              percent_processor_utilization: 
                aliases: {percent_processor_utilization: null}
              processor_units_utilized: 
                aliases: {processor_units_utilized: null}
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
          lpar_memory:
            type: Power
            component: ${here/id}
            commandTemplate: lshwres -r mem --level lpar -m "${here/getManagedSystemID}"  --filter
              "lpar_ids=${here/lpar_id}"
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              curr_max_mem:
                aliases: {curr_max_mem_megabytes: null}
              curr_mem:
                aliases: {curr_mem_bytes: null}
              curr_min_mem:
                aliases: {curr_min_mem_megabytes: null}
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
        graphs:
          Current Memory:
            units: bytes
            base: true
            graphpoints:
              memory_curr_max_mem:
                dpName: lpar_memory_curr_max_mem
                legend: Maximum
              memory_curr_mem:
                dpName: lpar_memory_curr_mem
                legend: Current Memory
              memory_curr_min_mem:
                dpName: lpar_memory_curr_min_mem
                legend: Minimum
          Processor Units Used:
            units: Units
            graphpoints:
              cpu_processor_units_utilized:
                dpName: lpar_cpu_processor_units_utilized
                legend: Used
          Processor Utilization:
            units: Percentage
            miny: 0
            graphpoints:
              cpu_percent_processor_utilization:
                dpName: lpar_cpu_percent_processor_utilization
                format: '%5.2lf%%'
                legend: Utilization
      HMCManagedSystem:
        description: Managed System Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCManagedSystem
        datasources:
          memory:
            type: Power
            component: ${here/id}
            commandTemplate: lshwres -r mem --level sys -m "${here/id}"
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              configurable_sys_mem:
                aliases: {configurable_sys_mem: null}
              curr_avail_sys_mem:
                aliases: {curr_avail_sys_mem: null}
              installed_sys_mem:
                aliases: {installed_sys_mem: null}
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
          pool_cycles:
            type: Power
            component: ${here/id}
            commandTemplate: lslparutil -r pool -m "${here/id}" -F total_pool_cycles utilized_pool_cycles
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              total_pool_cycles: DERIVE_MIN_0_ALIAS
              utilized_pool_cycles: DERIVE_MIN_0_ALIAS
            parser: ZenPacks.zenoss.IBM.Power.parsers.pool_cycles
          percent_pool_Cycles:
            type: Calculated Performance
            component: ${here/id}
            datapoints:
              percent_pool_Cycles:
                rrdmin: 0
                aliases: {percent_pool_cycles: null}
            description: Percentage calculated from the datapoints utilized_pool_cycles and total_pool_cycles
            expression: (utilized_pool_cycles / (total_pool_cycles or utilized_pool_cycles)) * 100
          processors:
            type: Power
            component: ${here/id}
            commandTemplate: lshwres -r proc --level sys -m "${here/id}"
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              configurable_sys_proc_units: 
                aliases: {configurable_sys_proc_units: null}
              curr_avail_sys_proc_units: 
                aliases: {curr_avail_sys_proc_units: null}
              installed_sys_proc_units: 
                aliases: {installed_sys_proc_units: null}
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
        graphs:
          Memory:
            units: bytes
            base: true
            graphpoints:
              configurable_sys_mem:
                dpName: memory_configurable_sys_mem
                legend: Configurable
              curr_avail_sys_mem:
                dpName: memory_curr_avail_sys_mem
                legend: Available
              installed_sys_mem:
                dpName: memory_installed_sys_mem
                legend: Installed
          Percent Pool Cycles:
            units: Percentage
            graphpoints:
              pool_Cycles_percent_pool_Cycles:
                dpName: percent_pool_Cycles_percent_pool_Cycles
                legend: Utilization
          Processors:
            units: Processor Units
            graphpoints:
              configurable_sys_proc_units:
                dpName: processors_configurable_sys_proc_units
                legend: Configurable
              curr_avail_sys_proc_units:
                dpName: processors_curr_avail_sys_proc_units
                legend: Available
              installed_sys_proc_units:
                dpName: processors_installed_sys_proc_units
                legend: Installed
      HMCProcessorPool:
        description: Processor Pool Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCProcessorPool
        datasources:
          pool_utilization:
            type: Power
            component: ${here/id}
            commandTemplate: lslparutil -r procpool -m "${here/getManagedSystemID}" --filter
              "pool_names=${here/poolname}" -n 2
            cycletime: 300
            eventClass: /Cmd/Fail
            datapoints:
              percent_pool_utilization:
                aliases: {percent_pool_utilization: null}
            parser: ZenPacks.zenoss.IBM.Power.parsers.HMCParser
        graphs:
          Shared Processor Pool Utilization:
            units: Percentage
            miny: 0
            maxy: 100
            graphpoints:
              utilization_percent_pool_utilization:
                dpName: pool_utilization_percent_pool_utilization
                format: '%5.2lf%%'
                legend: utilization
      HMCServiceProcessor:
        description: Service Processor Metrics
        targetPythonClass: ZenPacks.zenoss.IBM.Power.HMCServiceProcessor

